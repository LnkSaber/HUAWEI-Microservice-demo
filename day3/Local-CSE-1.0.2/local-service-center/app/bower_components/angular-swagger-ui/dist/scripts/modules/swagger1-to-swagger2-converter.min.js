/*
 * Orange angular-swagger-ui - v0.4.4
 *
 * (C) 2015 Orange, all right reserved
 * MIT Licensed
 */
"use strict";angular.module("swaggerUi").service("swagger1ToSwagger2Converter",["$q","$http","swaggerModules",function(a,b,c){function d(d){var e=a.defer(),f={method:"GET",url:d};return c.execute(c.BEFORE_LOAD,f).then(function(){b(f).then(e.resolve).catch(e.reject)}).catch(e.reject),e.promise}function e(b,e,h){var i=h,k=i.info||(i.info={}),l=[];k.contact={email:k.contact},k.license={name:k.license,url:k.licenseUrl},k.termsOfService=k.termsOfServiceUrl,i.paths={},i.definitions={},i.tags=[],angular.forEach(i.apis,function(a){l.push(d(e+a.path))}),a.all(l).then(function(a){c.execute(c.BEFORE_CONVERT,a).then(function(){angular.forEach(a,function(a){f(a.data,i),g(a.data,i),j(a.data,i)}),i.swagger="2.0",b.resolve(!0)}).catch(b.reject)}).catch(b.reject)}function f(a,b){if(b.info.version=b.info.version||a.apiVersion,b.basePath=b.basePath||a.basePath,0===b.basePath.indexOf("http")){var c=angular.element('<a href="'+b.basePath+'"></a>')[0];b.schemes=[c.protocol.replace(":","")],b.host=c.host,b.basePath=c.pathname}b.tags.push({name:a.resourcePath.substring(a.resourcePath.lastIndexOf("/")+1)})}function g(a,b){var c,d;angular.forEach(a.apis,function(e){c=b.paths[e.path]=b.paths[e.path]||{},angular.forEach(e.operations,function(b){d={},c[b.method.toLowerCase()]={deprecated:angular.isString(b.deprecated)?"true"===b.deprecated:b.deprecated,description:b.notes,summary:b.summary,operationId:b.nickname,produces:b.produces||a.produces,consumes:b.consumes||a.consumes,parameters:b.parameters,responses:d,tags:[a.resourcePath.substring(a.resourcePath.lastIndexOf("/")+1)]},h(a,b),i(a,b,d)})})}function h(a,b){angular.forEach(b.parameters,function(b){b.in="form"===b.paramType?"formData":b.paramType,b.default=b.defaultValue;var c=b.type||b.$ref;a.models&&c&&a.models[c]&&(b.schema={$ref:m(c)},delete b.type)})}function i(a,b,c){var d;angular.forEach(b.responseMessages,function(e){if(d=c[e.code]={description:e.message},e.responseModel)a.models&&a.models[e.responseModel]?d.schema={$ref:m(e.responseModel)}:d.type=e.responseModel;else if(200===e.code&&"void"!==b.type&&(d.schema={type:b.type,$ref:m(b.type)},"array"===b.type)){delete d.schema.$ref;var f=b.items.type||b.items.$ref,g=d.schema.items={};a.models&&a.models[f]?g.$ref=m(f):g.type=f}})}function j(a,b){var c,d=new RegExp("Map\\[string,(.*)\\]"),e=new RegExp("List\\[(.*)\\]");angular.forEach(a.models,function(f,g){b.definitions[g]=f,f.subTypes&&(angular.forEach(f.subTypes,function(b){c=a.models&&a.models[b],c&&(f.required=(f.required||[]).concat(c.required||[]),angular.forEach(c.properties,function(a,b){f.properties[b]=a}))}),delete f.subTypes),angular.forEach(f.properties,function(b){var c=b.type||b.$ref;if(c&&l(c,a))b.$ref=m(c),delete b.type;else if(c&&c.match(d)){delete b.$ref;var f=c.match(d)[1];f&&f.match(e)?(f=f.match(e)[1],b.type="object",b.additionalProperties={type:"array"},b.additionalProperties.items=k(f,a)):(b.type="object",b.additionalProperties=k(f,a))}else b.items?(c=b.items.type||b.items.$ref,l(c,a)&&(b.items.$ref=m(c),delete b.items.type)):b.enum&&(b.type="string",delete b.$ref)})})}function k(a,b){return l(a,b)?{$ref:m(a)}:{type:a}}function l(a,b){return b.models&&b.models[a]}function m(a){return"#/definitions/"+a}this.execute=function(b,c){var d=a.defer(),f=c.swaggerVersion;return f&&0===f.indexOf("1.")?e(d,b,c):d.resolve(!1),d.promise}}]).run(["swaggerModules","swagger1ToSwagger2Converter",function(a,b){a.add(a.BEFORE_PARSE,b)}]);